{% extends "base.html" %} 
{% load static %} 
{% block content %}
{% include "header.html" %}
  {% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>
                {{ message }}
            </li>
        {% endfor %}
    </ul>
  {% endif %}

  <p class="custom-button">
    <a href="{% url 'echos:add-echo' %}" class="textButton">Add echo</a>
  </p>

  {% if echos|length > 0 %}
    {% if echos|length > 1 %}
      <p>Tribu has posted {{echos|length}} echos so far!</p>
    {% else %}
      <p>Tribu has posted {{echos|length}} echo so far!</p>
    {% endif %}
    
    {% for echo in echos %}
      <div class="echoContainer">
            <span class="pill-username"><p><a href="{% url 'users:profile' echo.user.username %}">@{{ echo.user.username }}</a></p></span>
            <p>{{ echo.content | truncatewords:20 }}</p>
            <p>Read more <a href="{% url 'echos:echo-detail' echo.pk %}">here</a></p>
            <div class="time">
              <span class="separator"><span>
              <p>{{ echo.created_at|timesince }}</p>
            </div>
          </div>
    {% endfor %}
  {% else %}
    <div>
      <p class="grey-message"><i>No echos yet.</i></p>
    </div>
  {%endif%}

  
{% endblock %}
