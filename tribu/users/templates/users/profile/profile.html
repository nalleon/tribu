{% extends "base.html" %} 
{% load static %} 
{% block content %}
{% include "header.html" %}
  {% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>
                {{ message }}
            </li>
        {% endfor %}
    </ul>
  {% endif %}

  <div class="user">
    <div class="img-post">
      <img class="img-pfp" src="{{ profile.avatar.url }}"/>
    </div>
    <p>
      {{profile.user.username}}
    </p>
    <div class="pfp-info">
      <p>
        {{profile.user.first_name}} {{profile.user.last_name}} {{profile.user.email}}
      </p>
      {% if profile.bio %}
        <p>
          {{profile.bio}}
        </p>
      {% endif %}
        <p class="grey-message">
          <i>No bio yet!</i>
        </p>
    </div>
    {% if request.user == profile.user %}
      <div class="edit-profile">
        <p><a href="{% url 'users:user-edit' profile.user.username %}">Editar</a></p>
      </div>
    {% endif %}
  </div>

  {% for echo in profile.user.echos.all %}
    {% if forloop.counter0 < 5 %}
      <div class="echoContainer" style="background-color: {% cycle 'LightBlue' 'LightPink' %}">
        <p><a href="{% url 'users:profile' echo.user.username %}">{{ echo.user.username }}</a></p>
        <p>{{ echo.created_at|timesince }}</p>
        <p>{{ echo.content|truncatewords:20 }}</p>
        <p>Read more <a href="{% url 'echos:echo-detail' echo.pk %}">here</a></p>
      </div>
    {% endif %}
  {% empty %}
    <p class="grey-message"><i>No echos yet</i></p>
  {% endfor %}

  {% if profile.user.echos.count > 5 %}
    <p><a href="{% url 'users:user-echos' profile.user.username %}">Show all echos</a></p>
  {% endif %}


{% endblock %}
